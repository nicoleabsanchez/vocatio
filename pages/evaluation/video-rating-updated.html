<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calificaci√≥n de Video</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #f8f9fa; color: #454E4C; line-height: 1.6; }
        .container { max-width: 1440px; margin: 0 auto; padding: 2rem; }
        .content-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin-top: 2rem; }
        .header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #693efe; }
        .nav-menu { display: flex; gap: 2rem; }
        .nav-item { color: #8b8a92; text-decoration: none; font-weight: 500; }
        .nav-item:hover { color: #693efe; }
        .video-container { background: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .video-player { width: 100%; aspect-ratio: 16/9; background: #000; }
        .video-info { padding: 1.5rem; }
        .rating-container { margin: 1rem 0; }
        .star-rating { display: flex; gap: 0.5rem; }
        .star {
            font-size: 24px;
            cursor: pointer;
            color: #ddd;
            transition: color 0.2s;
        }
        .star.active { color: #ffd700; }
        .rating-text { 
            margin-top: 0.5rem;
            font-size: 0.9rem;
            color: #8b8a92;
        }
        .video-title { font-size: 1.5rem; font-weight: bold; margin-bottom: 1rem; }
        .video-meta { display: flex; gap: 1.5rem; color: #8b8a92; margin-bottom: 1rem; }
        .video-description { color: #666; margin-bottom: 1.5rem; }
        .tags { display: flex; gap: 0.5rem; flex-wrap: wrap; }
        .tag { background: #f0edff; color: #693efe; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.875rem; }
        .rating-panel { background: #fff; border-radius: 12px; padding: 1.5rem; position: sticky; top: 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .rating-title { font-size: 1.25rem; font-weight: bold; margin-bottom: 1.5rem; }
        .rating-box { background: #f0edff; padding: 1.5rem; border-radius: 12px; text-align: center; margin-bottom: 1.5rem; }
        .rating-score { font-size: 3rem; font-weight: bold; color: #693efe; margin-bottom: 0.5rem; }
        .rating-stars { display: flex; justify-content: center; gap: 0.5rem; margin: 1rem 0; }
        .star { width: 24px; height: 24px; background: #693efe; border-radius: 50%; cursor: pointer; transition: transform 0.2s; }
        .star:hover { transform: scale(1.1); }
        .comment-box { margin-top: 1.5rem; }
        .comment-input { width: 100%; height: 100px; padding: 1rem; border: 1px solid #d9d4ff; border-radius: 8px; margin-bottom: 1rem; resize: none; font-family: inherit; }
        .btn { background: #693efe; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; font-weight: 500; cursor: pointer; width: 100%; transition: background 0.3s; }
        .btn:hover { background: #5a35d9; }
        .meta-item { display: flex; align-items: center; gap: 0.5rem; }
        .meta-icon { color: #693efe; }
        /* Comentarios */
        .comment { padding: 0.75rem; border: 1px solid #eee; border-radius: 8px; margin-bottom: 0.5rem; display:flex; justify-content:space-between; align-items:flex-start; }
        .comment strong { display:block; }
        .vote-count { margin: 0.25rem 0; }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">vocatio</div>
            <nav class="nav-menu">
                <a href="#" class="nav-item">Explorar carreras</a>
                <a href="#" class="nav-item">Eventos</a>
                <a href="#" class="nav-item">Test vocacional</a>
                <a href="#" class="nav-item">Ruta de aprendizaje</a>
                <a href="#" class="nav-item">Progreso</a>
            </nav>
        </header>

        <div class="content-grid">
            <main class="video-container">
                <div class="video-player">
                    <video width="100%" height="100%" controls>
                        <source src="video-ejemplo.mp4" type="video/mp4">
                        Tu navegador no soporta el elemento de video.
                    </video>
                </div>
                <div class="video-info">
                    <h1 class="video-title">Introducci√≥n a la Ingenier√≠a de Sistemas</h1>
                    <div class="video-meta">
                        <span class="meta-item"><span class="meta-icon">‚è±Ô∏è</span>15 min</span>
                        <span class="meta-item"><span class="meta-icon">üìπ</span>Video</span>
                        <span class="meta-item"><span class="meta-icon">üëÅÔ∏è</span>2,345 vistas</span>
                    </div>
                    <p class="video-description">Este video introductorio te ayudar√° a comprender los fundamentos de la Ingenier√≠a de Sistemas, incluyendo las √°reas de especializaci√≥n, habilidades necesarias y oportunidades profesionales en el mercado actual.</p>
                    <div class="tags"><span class="tag">Tecnolog√≠a</span><span class="tag">Ingenier√≠a</span><span class="tag">Programaci√≥n</span><span class="tag">Innovaci√≥n</span></div>
                </div>
            </main>

            <aside class="rating-panel">
                <h2 class="rating-title">Calificar Material</h2>
                <div class="rating-box">
                    <div class="rating-score">4.5</div>
                    <p>Basado en 127 calificaciones</p>
                    <div class="rating-stars"><span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span></div>
                </div>

                <h3>Tu calificaci√≥n</h3>
                <div class="rating-stars"><span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span></div>

                <div class="comment-box">
                    <h3>Tu comentario (opcional)</h3>
                    <textarea id="commentInput" class="comment-input" placeholder="Comparte tu opini√≥n sobre este material..."></textarea>
                    <button id="postCommentBtn" class="btn">Publicar Calificaci√≥n</button>

                    <div id="commentsList" style="margin-top:1rem;"></div>
                </div>
            </aside>
        </div>
    </div>

    <script>
        // Sistema de calificaci√≥n con estrellas
        const ratingKey = 'video_rating_v1';
        const ratingContainer = document.querySelector('.rating-stars');
        const stars = ratingContainer.querySelectorAll('.star');
        
        // Cargar calificaci√≥n guardada
        let currentRating = parseInt(localStorage.getItem(ratingKey) || '0');
        updateStarDisplay(currentRating);

        // Eventos para las estrellas
        stars.forEach((star, index) => {
            // Hover effect
            star.addEventListener('mouseover', () => {
                highlightStars(index + 1);
            });

            // Click event
            star.addEventListener('click', () => {
                currentRating = index + 1;
                localStorage.setItem(ratingKey, currentRating.toString());
                updateStarDisplay(currentRating);
                // Actualizar el contador de calificaci√≥n general si existe
                const ratingScore = document.querySelector('.rating-score');
                if (ratingScore) {
                    ratingScore.textContent = currentRating.toFixed(1);
                }
            });
        });

        // Remover highlight al salir del √°rea de estrellas
        ratingContainer.addEventListener('mouseleave', () => {
            updateStarDisplay(currentRating);
        });

        function highlightStars(rating) {
            stars.forEach((star, index) => {
                star.style.opacity = index < rating ? '1' : '0.5';
            });
        }

        function updateStarDisplay(rating) {
            highlightStars(rating);
        }

        // Comentarios + votaci√≥n
        const commentsKey = 'video_comments_demo_v1';
        const initialComments = [
            { id: 'c1', author: 'Mar√≠a', text: 'Muy buen resumen de los conceptos b√°sicos.', votes: 3 },
            { id: 'c2', author: 'Carlos', text: 'Me gustar√≠a ver ejemplos m√°s pr√°cticos.', votes: 1 }
        ];
        function loadComments(){ const raw = localStorage.getItem(commentsKey); if(!raw){ localStorage.setItem(commentsKey, JSON.stringify(initialComments)); return initialComments.slice(); } try { return JSON.parse(raw);}catch(e){console.error(e); return initialComments.slice(); }}
        function saveComments(c){ localStorage.setItem(commentsKey, JSON.stringify(c)); }
        const votedKey = 'video_comments_voted_v1';
        function loadVoted(){ try { return JSON.parse(sessionStorage.getItem(votedKey)||'{}'); }catch{return{};}}
        function saveVoted(o){ sessionStorage.setItem(votedKey, JSON.stringify(o)); }

        const commentsListEl = document.getElementById('commentsList');
        const commentInputEl = document.getElementById('commentInput');
        const postBtn = document.getElementById('postCommentBtn');

        function renderComments(){ const comments=loadComments(); commentsListEl.innerHTML=''; const voted=loadVoted(); comments.forEach(c=>{
            const el=document.createElement('div'); el.className='comment'; el.dataset.id=c.id;
            el.style.padding='0.75rem'; el.style.border='1px solid #eee'; el.style.borderRadius='8px'; el.style.marginBottom='0.5rem'; el.style.display='flex'; el.style.justifyContent='space-between'; el.style.alignItems='flex-start';
            const left=document.createElement('div'); const author=document.createElement('strong'); author.textContent=c.author; const p=document.createElement('p'); p.style.margin='0.25rem 0'; p.style.color='#666'; p.textContent=c.text; left.appendChild(author); left.appendChild(p);
            const right=document.createElement('div'); right.style.textAlign='center'; right.style.minWidth='90px';
            const upBtn=document.createElement('button'); upBtn.className='vote-btn'; upBtn.textContent='üëç'; upBtn.style.cursor='pointer'; upBtn.style.background='transparent'; upBtn.style.border='none'; upBtn.style.fontSize='18px';
            const count=document.createElement('div'); count.className='vote-count'; count.style.margin='0.25rem 0'; count.textContent=c.votes||0;
            const downBtn=document.createElement('button'); downBtn.className='vote-btn'; downBtn.textContent='üëé'; downBtn.style.cursor='pointer'; downBtn.style.background='transparent'; downBtn.style.border='none'; downBtn.style.fontSize='18px';
            const votedFor=voted[c.id]; if(votedFor==='up') upBtn.style.opacity='1'; if(votedFor==='down') downBtn.style.opacity='1'; if(!votedFor){ upBtn.style.opacity='0.8'; downBtn.style.opacity='0.8'; }
            upBtn.addEventListener('click',()=>handleVote(c.id,'up')); downBtn.addEventListener('click',()=>handleVote(c.id,'down'));
            right.appendChild(upBtn); right.appendChild(count); right.appendChild(downBtn);
            el.appendChild(left); el.appendChild(right); commentsListEl.appendChild(el);
        }); }

        function handleVote(commentId, action){ const comments=loadComments(); const idx=comments.findIndex(c=>c.id===commentId); if(idx===-1) return; const voted=loadVoted(); const prev=voted[commentId]; if(prev===action){ delete voted[commentId]; if(action==='up') comments[idx].votes = Math.max(0,(comments[idx].votes||0)-1); else comments[idx].votes = Math.max(0,(comments[idx].votes||0)+1); } else { if(!prev){ voted[commentId]=action; comments[idx].votes = (comments[idx].votes||0) + (action==='up' ? 1 : -1); } else { voted[commentId]=action; comments[idx].votes = (comments[idx].votes||0) + (action==='up' ? 2 : -2); } } saveComments(comments); saveVoted(voted); renderComments(); }

        postBtn.addEventListener('click',()=>{ const text = commentInputEl.value.trim(); if(!text) return alert('Escribe un comentario antes de publicar.'); const comments=loadComments(); const id='c'+Date.now(); comments.unshift({ id, author:'An√≥nimo', text, votes:0 }); saveComments(comments); commentInputEl.value=''; renderComments(); });
        renderComments();
    </script>
</body>
</html>